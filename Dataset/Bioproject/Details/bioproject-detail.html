<!DOCTYPE html>
<html lang="it">

<head>
    <script src="./../../../load-insert.js" defer></script>
    <div id="headContainer"></div>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
        integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="./bioproject-detail.css" />

    <title>Bioproject Details - Rett Syndrome Portal</title>
</head>

<body>
    <div id="navbarContainer"></div>

    <!--spazio vuoto-->
    <div id="spazio_vuoto"></div>

    <div class="container" id="sfondo3">
        <div>
            <h1><strong>Details</strong></h1>
        </div>
    </div>

    <div class="container" id="sfondo2">
        <div class="row" id="riquadro2">

            <nav class="shift">
                <ul style="    width: 100%; display: flex; justify-content: space-evenly;">
                    <li><a id="infoLi">Info</a></li>
                    <li><a id="dataLi">Data</a></li>
                    <li><a id="phenotypicLi">Phenotypic Info</a></li>
                </ul>
            </nav>

            <div id="infoDiv">
                <div class="title">
                    <p>Bioproject ID</p>
                    <p>Organism</p>
                    <p>Platform</p>
                </div>
                <div class="bio-id">
                    <p id="bioName" style="font-weight: 600;"></p>
                    <p id="organism" style="font-weight: 600;"></p>
                    <div id="platform"></div>
                </div>
            </div>

            <div id="dataDiv" style="display: none; background-color: green;">
                prova2
            </div>

            <div id="phenotypicDiv" style="display: none; background-color: yellow;">
                prova4
            </div>
        </div>

        <!--spazio vuoto-->
        <div id="spazio_vuoto"></div>
        <!--spazio vuoto-->
        <div id="spazio_vuoto"></div>
        <!--spazio vuoto-->
        <div id="spazio_vuoto"></div>

    </div>

    <!--barra in basso conclusiva= footer-->
    <div id="footerContainer"></div>

    <script>
        var infoLi = document.getElementById('infoLi');
        var infoDiv = document.getElementById('infoDiv');
        var dataLi = document.getElementById('dataLi');
        var dataDiv = document.getElementById('dataDiv');
        var phenotypicLi = document.getElementById('phenotypicLi');
        var phenotypicDiv = document.getElementById('phenotypicDiv');
        var allDivs = [infoDiv, dataDiv, phenotypicDiv];
        function hideAllDivs() {
            allDivs.forEach(function (div) {
                div.style.display = 'none';
            });
        }
        infoLi.addEventListener('click', function () {
            hideAllDivs();
            infoDiv.style.display = 'flex';
        });
        dataLi.addEventListener('click', function () {
            hideAllDivs();
            dataDiv.style.display = 'flex';
        });
        phenotypicLi.addEventListener('click', function () {
            hideAllDivs();
            phenotypicDiv.style.display = 'flex';
        });

        var bioName = document.getElementById('bioName');
        var fileName = JSON.parse(localStorage.getItem('fileName'));
        bioName.textContent = fileName;

        var navbarContainer = document.getElementById('navbarContainer');
        navbarContainer.addEventListener('click', function () {
            localStorage.removeItem('data');
            localStorage.removeItem('headerColumns');
        });

        var organismDiv = document.getElementById('organism');
        var headerColumns = JSON.parse(localStorage.getItem('headerColumns'));
        var organismIndex = headerColumns.indexOf('Organism');
        var data = JSON.parse(localStorage.getItem('data'));
        var firstDataArray = data[0];
        var organismText = firstDataArray[organismIndex];
        organismDiv.textContent = organismText;

        var platformDiv = document.getElementById('platform');
        var platformIndex = headerColumns.indexOf('Platform');
        var platforms = [];
        if (platformIndex !== -1) {
            for (var i = 0; i < data.length; i++) {
                var platform = data[i][platformIndex]; if
                    (!platforms.includes(platform)) { platforms.push(platform); }
            }
        }
        for (var i = 0; i < platforms.length; i++) {
            var p = document.createElement('p');
            p.style.fontWeight = '600';
            p.style.marginBottom = '0';
            p.textContent = platforms[i];
            platformDiv.appendChild(p);
        }


    </script>
</body>

</html>